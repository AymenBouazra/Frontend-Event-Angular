<div bsModal #modal="bs-modal" class="modal right fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
    aria-hidden="true">
    <div class="modal-dialog modal-primary" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">{{modalTitle}}</h4>
                <button type="button" class="close" (click)="hide()" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form [formGroup]="eventForm" (ngSubmit)="addEvent()">
                <div class="modal-body">
                    <div class="form-group">
                        <label>Event Name :</label>
                        <input type="text" class="form-control" placeholder="Enter your event name"
                            formControlName="eventName"
                            [ngClass]="{'is-invalid': submitted && eventForm.controls.eventName.errors, 'is-valid': submitted && !eventForm.controls.eventName.errors}">
                        <div class="invalid-feedback d-block">
                            <div *ngIf="submitted && eventForm.controls.eventName.hasError('required')">
                                Event Name is required.
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Event Description :</label>
                        <textarea class="form-control" placeholder="Type your Event description here"
                            formControlName="eventDescription"
                            [ngClass]="{'is-invalid': submitted && eventForm.controls.eventDescription.errors, 'is-valid': submitted && !eventForm.controls.eventDescription.errors}"></textarea>
                        <div class="invalid-feedback d-block">
                            <div *ngIf="submitted && eventForm.controls.eventDescription.hasError('required')">
                                Event Description is required.</div>
                        </div>
                    </div>
                    <div class="form-group col-sm-5">
                        <label>Event Started In : </label>
                        <div>
                            <input type="text" #dp="bsDatepicker" class="form-control" [minDate]="minStartDate"
                                bsDatepicker [(bsValue)]="startValue" formControlName="starDateTime"
                                [ngClass]="{'is-invalid': submitted && eventForm.controls.starDateTime.errors, 'is-valid': submitted && !eventForm.controls.starDateTime.errors}">
                        </div>
                        <div class="invalid-feedback d-block">
                            <div *ngIf="submitted && eventForm.controls.starDateTime.hasError('required')">
                                Event start time is required.
                            </div>
                        </div>
                    </div>
                    <div class="form-group col-sm-5">
                        <label>Event Ended In : </label>
                        <div>
                            <input type="text" #dp="bsDatepicker" class="form-control" [minDate]="minEndDate"
                                bsDatepicker [(bsValue)]="endValue" formControlName="endDateTime"
                                [ngClass]="{'is-invalid': submitted && eventForm.controls.endDateTime.errors, 'is-valid': submitted && !eventForm.controls.endDateTime.errors}">
                        </div>
                        <div class="invalid-feedback d-block">
                            <div *ngIf="submitted && eventForm.controls.endDateTime.hasError('required')">
                                Event end time is required.
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label class="col-md-4 col-form-label">Event's Type :</label>
                        <div class="col-md-8 col-form-label">
                            <div class="form-check form-check-inline " id="inline-radios">
                                <input class="form-check-input" type="radio" formControlName="eventType" value="Free">
                                <label>Free</label>
                            </div>
                            <div class="form-check form-check-inline ">
                                <input class="form-check-input" type="radio" formControlName="eventType" value="Paid">
                                <label>Paid</label>
                            </div>
                            <div class="invalid-feedback d-block"
                                *ngIf="submitted && eventForm.controls.eventType.hasError('required')">
                                Event's Type is required.
                            </div>
                        </div>
                    </div>
                    <div class="form-group" *ngIf="eventForm.value.eventType == 'Paid'">
                        <label>Price :</label>
                        <div class="input-group">
                            <input type="number" class="form-control" placeholder="Price" formControlName="price"
                                [ngClass]="{'is-invalid': submitted && eventForm.controls.price.errors, 'is-valid': submitted && !eventForm.controls.price.errors}">
                            <span class="input-group-prepend"><span class="input-group-text">TND</span></span>
                        </div>
                        <div class="invalid-feedback d-block">
                            <div *ngIf="submitted && eventForm.controls.price.hasError('required')">
                                Price is required.
                            </div>
                            <div *ngIf="submitted && eventForm.controls.price.hasError('min')">
                                Price is invalid.
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Ticket Number</label>
                        <input type="number" class="form-control" placeholder="" formControlName="availableTicketNumber"
                            [ngClass]="{'is-invalid': submitted && eventForm.controls.availableTicketNumber.errors, 'is-valid': submitted && !eventForm.controls.availableTicketNumber.errors}">
                        <div class="invalid-feedback d-block">
                            <div *ngIf="submitted && eventForm.controls.availableTicketNumber.hasError('required')">
                                Ticket's Number is required.
                            </div>
                            <div *ngIf="submitted && eventForm.controls.availableTicketNumber.hasError('min')">
                                Ticket's Number is invalid.
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Event's Location</label>
                        <input type="text" class="form-control" placeholder="Ex. Online Or your Address"
                            formControlName="location"
                            [ngClass]="{'is-invalid': submitted && eventForm.controls.location.errors, 'is-valid': submitted && !eventForm.controls.location.errors}">
                        <div class="invalid-feedback d-block">
                            <div *ngIf="submitted && eventForm.controls.location.hasError('required')">
                                Event's Location is required.
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" (click)="hide()">Close</button>
                    <button type="button" class="btn btn-primary" (click)="updateEvent()" *ngIf="showUpdateButton">Save
                        changes</button>
                    <button type="submit" class="btn btn-primary" *ngIf="!showUpdateButton">Save </button>
                </div>
            </form>
        </div>
    </div>
</div>
<div class="animated fadeIn">
    <div class="row">
        <div class="col-sm-12">
            <div class="card">
                <div class="card-header">
                    <strong>Event</strong>
                    <small>list</small>
                </div>
                <div class="card-body">
                    <div class="offset-1 my-3 row">
                        <div class="col-12">
                            <button class="btn btn-success col-1.5 float-right" data-toggle="modal"
                                (click)="showAdd()"><i class="fa fa-plus"></i> Add event</button>
                            <!-- <input type="search" class="form-control col-3" placeholder="Search product by name"  [(ngModel)]="searchText"> -->
                        </div>
                    </div>
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th scope="col">#</th>
                                <th scope="col">Event name</th>
                                <th scope="col">Description</th>
                                <th scope="col">Event Time</th>
                                <th scope="col">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="" *ngFor="let event of listEvents ;let i=index">
                                <td>{{i+1}}</td>
                                <td>{{event.eventName}}</td>
                                <td>{{event.eventDescription}}</td>
                                <td>{{event.starDateTime | date: 'MMM d, y, h:mm:ss a'}}</td>
                                <td>
                                    <button type="button" class="btn btn-warning" data-toggle="modal"
                                        (click)="showUpdate(event._id)">
                                        <i class="fa fa-edit"></i> Update
                                    </button>
                                    <button type="button" class="btn btn-danger text-dark"
                                        (click)='deleteEvent(event._id)'><i class="fa fa-trash"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!--/.row-->
            </div>
        </div>
    </div>
</div>